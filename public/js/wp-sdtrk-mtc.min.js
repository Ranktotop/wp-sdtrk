class Wp_Sdtrk_Catcher_Mtc{constructor(t,e){this.localizedData=wp_sdtrk_mtc,this.event=t,this.helper=e,this.s_enabled=!1,this.b_enabled=!1,this.pixelLoaded=!1,this.validate()}validate(t=2){""!==this.localizedData.pid&&this.event&&(this.helper.isAdmin()?this.helper.debugLog(this.localizedData.dbg,{},"Skip because user is admin (mtc)"):(2!==t&&0!==t||!1===this.helper.has_consent(this.localizedData.b_ci,this.localizedData.b_cs,this.event)||""===this.localizedData.b_e||(this.b_enabled=!0,this.loadPixel()),2!==t&&1!==t||!1===this.helper.has_consent(this.localizedData.s_ci,this.localizedData.s_cs,this.event)||""===this.localizedData.s_e||(this.s_enabled=!0)))}isOngoingBackload(t){var e=!0,a=!1;return"b"!==t||(e=this.pixelLoaded)||(this.validate(0),a=this.pixelLoaded),"s"!==t||(e=this.isEnabled("s"))||(this.validate(1),a=this.isEnabled("s")),!1===e&&!0===a}isEnabled(t){switch(t){case"b":return this.b_enabled;case"s":return this.s_enabled}return!1}catchPageHit(t=2){0!==t&&2!==t||this.fireData("Page",{state:!0}),this.catchEventHit(t)}catchEventHit(t=2){!this.event.grabEventName()||0!==t&&2!==t||this.fireData("Event",{state:!0})}catchScrollHit(t,e=2){0!==e&&2!==e||this.fireData("Scroll",{percent:t})}catchTimeHit(t,e=2){0!==e&&2!==e||this.fireData("Time",{time:t})}catchClickHit(t,e=2){0!==e&&2!==e||this.fireData("Click",{tag:t})}catchVisibilityHit(t,e=2){0!==e&&2!==e||this.fireData("Visibility",{tag:t})}loadPixel(){var t,e,a,i,s;this.isEnabled("b")&&!this.pixelLoaded&&("/"!==(a=this.localizedData.pid).substr(-1)?a+="/mtc.js":a+="mtc.js",t=window,s=document,e="script",a=a,i="mt",t.MauticTrackingObject=i,t.mt=t.mt||function(){(t.mt.q=t.mt.q||[]).push(arguments)},i=s.createElement(e),s=s.getElementsByTagName(e)[0],i.async=1,i.src=a,s.parentNode.insertBefore(i,s),this.pixelLoaded=!0)}fireData(t,e){if(this.isEnabled("b")&&this.pixelLoaded)switch(t){case"Page":mt("send","pageview",this.get_data_custom("pageview")),this.helper.debugLog(this.localizedData.dbg,{event:"pageview"},"Fired in Browser (mtc-"+t+")");break;case"Event":mt("send",this.event.grabEventName(),this.get_data_custom(this.event.grabEventName())),this.helper.debugLog(this.localizedData.dbg,{event:this.event.grabEventName(),data:this.get_data_custom(this.event.grabEventName()),meta:{}},"Fired in Browser (mtc-"+t+")");break;case"Time":mt("send",this.helper.get_EventName(t,e.time),this.get_data_custom(this.helper.get_EventName(t,e.time),["currency","value","transaction_id"],{transaction_id:this.event.grabOrderId()+"-t"+e.time})),this.helper.debugLog(this.localizedData.dbg,{event:this.helper.get_EventName(t,e.time),data:this.get_data_custom(this.helper.get_EventName(t,e.time),["currency","value","transaction_id"],{transaction_id:this.event.grabOrderId()+"-t"+e.time})},"Fired in Browser (mtc-"+t+")");break;case"Scroll":mt("send",this.helper.get_EventName(t,e.percent),this.get_data_custom(this.helper.get_EventName(t,e.percent),["currency","value","transaction_id"],{transaction_id:this.event.grabOrderId()+"-s"+e.percent})),this.helper.debugLog(this.localizedData.dbg,{event:this.helper.get_EventName(t,e.percent),data:this.get_data_custom(this.helper.get_EventName(t,e.percent),["currency","value","transaction_id"],{transaction_id:this.event.grabOrderId()+"-s"+e.percent})},"Fired in Browser (mtc-"+t+")");break;case"Click":mt("send",this.helper.get_EventName(t,e.tag),this.get_data_custom(this.helper.get_EventName(t,e.tag),["currency","value","transaction_id"],{buttonTag:e.tag,transaction_id:this.event.grabOrderId()+"-b"+e.tag})),this.helper.debugLog(this.localizedData.dbg,{event:this.helper.get_EventName(t,e.tag),data:this.get_data_custom(this.helper.get_EventName(t,e.tag),["currency","value","transaction_id"],{buttonTag:e.tag,transaction_id:this.event.grabOrderId()+"-b"+e.tag})},"Fired in Browser (mtc-"+t+")");break;case"Visibility":mt("send",this.helper.get_EventName(t,e.tag),this.get_data_custom(this.helper.get_EventName(t,e.tag),["currency","value","transaction_id"],{itemTag:e.tag,transaction_id:this.event.grabOrderId()+"-v"+e.tag})),this.helper.debugLog(this.localizedData.dbg,{event:this.helper.get_EventName(t,e.tag),data:this.get_data_custom(this.helper.get_EventName(t,e.tag),["currency","value","transaction_id"],{itemTag:e.tag,transaction_id:this.event.grabOrderId()+"-v"+e.tag})},"Fired in Browser (mtc-"+t+")")}}get_data_custom(t=!1,e=[],a={}){var i,s={};for(i in(0<this.event.grabValue()||"purchase"===this.event.grabEventName())&&(s.currency="EUR",s.value=this.event.grabValue()),""!==this.event.grabProdId()&&(s.item_id=this.event.grabProdId(),s.item_name=this.event.grabProdName(),s.item_quantity=1,s.item_price=this.event.grabValue(),s.item_brand=this.event.getBrandName(),!1!==t&&(s.tags=t+"_"+this.event.grabProdId())),s.transaction_id=this.event.grabOrderId(),s.page_title=this.event.getPageName(),s.post_id=this.event.getPageId(),s.plugin="Wp-Sdtrk",s.event_url=this.event.getEventSource(),s.user_role="guest",s.landing_page=this.event.getLandingPage(),s.event_time=this.helper.get_time()[0],s.event_day=this.helper.get_time()[1],s.event_month=this.helper.get_time()[2],this.event.getUtm())""!==this.event.getUtm()[i]&&(s[i]=this.event.getUtm()[i]);for(var r,n,h=0;h<e.length;h++){var c=e[h];s.hasOwnProperty(c)&&delete s[c]}for([r,n]of Object.entries(a))s[r]=n;return s}}function wp_sdtrk_backload_mtc_b(){if(void 0!==window.wp_sdtrk_engine_class){var t=window.wp_sdtrk_engine_class.get_catcher_mtc();if(t.isOngoingBackload("b"))for(const e of window.wp_sdtrk_history)switch((data=e.split("_"))[0]){case"Page":t.catchPageHit(0);break;case"Time":t.catchTimeHit(data[1],0);break;case"Scroll":t.catchScrollHit(data[1],0);break;case"Click":t.catchClickHit(data[1],0);break;case"Visited":t.catchVisibilityHit(data[1],0)}}}