class Wp_Sdtrk_Catcher_Tt{constructor(t,e){this.localizedData=wp_sdtrk_tt,this.event=t,this.helper=e,this.s_enabled=!1,this.b_enabled=!1,this.pixelLoaded=!1,this.ttc=!1,this.ttp=!1,this.validate()}validate(t=2){""!==this.localizedData.pid&&this.event&&(2!==t&&0!==t||!1===this.helper.has_consent(this.localizedData.b_ci,this.localizedData.b_cs,this.event)||""===this.localizedData.b_e||(this.b_enabled=!0,this.loadPixel()),2!==t&&1!==t||!1===this.helper.has_consent(this.localizedData.s_ci,this.localizedData.s_cs,this.event)||""===this.localizedData.s_e||(this.s_enabled=!0),this.get_Ttc()&&(this.ttc=this.get_Ttc()),this.get_Ttp()&&(this.ttp=this.get_Ttp()))}isOngoingBackload(t){var e=!0,a=!1;return"b"!==t||(e=this.pixelLoaded)||(this.validate(0),a=this.pixelLoaded),"s"!==t||(e=this.isEnabled("s"))||(this.validate(1),a=this.isEnabled("s")),!1===e&&!0===a}isEnabled(t){switch(t){case"b":return this.b_enabled;case"s":return this.s_enabled}return!1}catchPageHit(t=2){0!==t&&2!==t||this.fireData("Page",{state:!0}),1!==t&&2!==t||this.sendData("Page",{state:!0}),this.catchEventHit(t)}catchEventHit(t=2){this.event.grabEventName()&&(0!==t&&2!==t||this.fireData("Event",{state:!0}),1!==t&&2!==t||this.sendData("Event",{state:!0}))}catchScrollHit(t,e=2){0!==e&&2!==e||this.fireData("Scroll",{percent:t}),1!==e&&2!==e||this.sendData("Scroll",{percent:t})}catchTimeHit(t,e=2){0!==e&&2!==e||this.fireData("Time",{time:t}),1!==e&&2!==e||this.sendData("Time",{time:t})}catchClickHit(t,e=2){0!==e&&2!==e||this.fireData("Click",{tag:t}),1!==e&&2!==e||this.sendData("Click",{tag:t})}catchVisibilityHit(t,e=2){0!==e&&2!==e||this.fireData("Visibility",{tag:t}),1!==e&&2!==e||this.sendData("Visibility",{tag:t})}loadPixel(){if(this.isEnabled("b")&&!this.pixelLoaded){var t=window,i=(document,"ttq"),e=this.localizedData.pid,s=(t.TiktokAnalyticsObject=i,t[i]=t[i]||[]);s.methods=["page","track","identify","instances","debug","on","off","once","ready","alias","group","enableCookie","disableCookie"],s.setAndDefer=function(t,e){t[e]=function(){t.push([e].concat(Array.prototype.slice.call(arguments,0)))}};for(var a=0;a<s.methods.length;a++)s.setAndDefer(s,s.methods[a]);s.instance=function(t){for(var e=s._i[t]||[],a=0;a<s.methods.length;a++)s.setAndDefer(e,s.methods[a]);return e},s.load=function(t,e){var a="https://analytics.tiktok.com/i18n/pixel/events.js",e=(s._i=s._i||{},s._i[t]=[],s._i[t]._u=a,s._t=s._t||{},s._t[t]=+new Date,s._o=s._o||{},s._o[t]=e||{},document.createElement("script")),a=(e.type="text/javascript",e.async=!0,e.src=a+"?sdkid="+t+"&lib="+i,document.getElementsByTagName("script")[0]);a.parentNode.insertBefore(e,a)},s.load(e),ttq.identify(this.get_data_user()),this.pixelLoaded=!0}}fireData(t,e){if(this.isEnabled("b")&&this.pixelLoaded)switch(t){case"Page":ttq.page(),this.helper.debugLog(this.localizedData.dbg,{event:"page_view"},"Fired in Browser (tt-"+t+")");break;case"Event":ttq.track(this.convert_eventname(this.event.grabEventName()),this.get_data_custom(),{event_id:this.event.grabOrderId()+"_"+this.get_hashId()}),this.helper.debugLog(this.localizedData.dbg,{event:this.convert_eventname(this.event.grabEventName()),data:this.get_data_custom(),meta:{event_id:this.event.grabOrderId()+"_"+this.get_hashId()}},"Fired in Browser (tt-"+t+")");break;case"Time":ttq.track(this.helper.get_EventName(t,e.time),this.get_data_custom(["value","currency"],{}),{event_id:this.event.grabOrderId()+"-t"+e.time+"_"+this.get_hashId()}),this.helper.debugLog(this.localizedData.dbg,{event:this.helper.get_EventName(t,e.time),data:this.get_data_custom(["value","currency"],{}),meta:{event_id:this.event.grabOrderId()+"-t"+e.time+"_"+this.get_hashId()}},"Fired in Browser (tt-"+t+")");break;case"Scroll":ttq.track(this.helper.get_EventName(t,e.percent),this.get_data_custom(["value","currency"],{}),{event_id:this.event.grabOrderId()+"-s"+e.percent+"_"+this.get_hashId()}),this.helper.debugLog(this.localizedData.dbg,{event:this.helper.get_EventName(t,e.percent),data:this.get_data_custom(["value","currency"],{}),meta:{event_id:this.event.grabOrderId()+"-s"+e.percent+"_"+this.get_hashId()}},"Fired in Browser (tt-"+t+")");break;case"Click":ttq.track(this.helper.get_EventName(t,e.tag),this.get_data_custom(["value","currency"],{buttonTag:e.tag}),{event_id:this.event.grabOrderId()+"-b"+e.tag+"_"+this.get_hashId()}),this.helper.debugLog(this.localizedData.dbg,{event:this.helper.get_EventName(t,e.tag),data:this.get_data_custom(["value","currency"],{buttonTag:e.tag}),meta:{event_id:this.event.grabOrderId()+"-b"+e.tag+"_"+this.get_hashId()}},"Fired in Browser (tt-"+t+")");break;case"Visibility":ttq.track(this.helper.get_EventName(t,e.tag),this.get_data_custom(["value","currency"],{itemTag:e.tag}),{event_id:this.event.grabOrderId()+"-v"+e.tag+"_"+this.get_hashId()}),this.helper.debugLog(this.localizedData.dbg,{event:this.helper.get_EventName(t,e.tag),data:this.get_data_custom(["value","currency"],{itemTag:e.tag}),meta:{event_id:this.event.grabOrderId()+"-v"+e.tag+"_"+this.get_hashId()}},"Fired in Browser (tt-"+t+")")}}sendData(t,e){this.isEnabled("s")&&(!1!==this.ttc&&(e.ttc=this.ttc),!1!==this.ttp&&(e.ttp=this.ttp),e.hash=this.get_hashId(),this.helper.send_ajax({event:this.event,type:"tt",handler:t,data:e},this.localizedData.dbg))}get_data_custom(t=[],e={}){var a,i={};for(a in(0<this.event.grabValue()||"PlaceAnOrder"===this.convert_eventname(this.event.grabEventName()))&&(i.currency="EUR",i.value=this.event.grabValue()),""!==this.event.grabProdId()?(i.content_id=this.event.grabProdId(),i.content_type="product",i.content_name=this.event.grabProdName()):(i.content_id=this.event.getPageId(),i.content_name=this.event.getPageName(),i.content_type="product"),i.quantity=1,this.event.getUtm()){var s=this.event.getUtm()[a];""!==s&&(i[a]=s)}for(var r=0;r<t.length;r++){var h=t[r];i.hasOwnProperty(h)&&delete i[h]}for(const[n,s]of Object.entries(e))i[n]=s;return i}get_data_user(){var t={};return""!==this.get_hashId()&&(t.external_id=this.get_hashId()),""!==this.event.getUserEmail()&&(t.email=email),t}convert_eventname(t){switch(t){case"page_view":case"view_item":return"ViewContent";case"generate_lead":return"SubmitForm";case"sign_up":return"CompleteRegistration";case"add_to_cart":return"AddToCart";case"begin_checkout":return"InitiateCheckout";case"purchase":return"PlaceAnOrder";default:return!1}}get_hashId(){if(this.helper.get_Cookie("_tthash",!1))return t=this.helper.get_Cookie("_tthash",!1),this.helper.save_cookie("_tthash",t,90,!1),t;var t=this.event.getEventSourceAgent(),e=this.event.getEventSourceAdress(),a=(a=t.toLowerCase()+e.toLowerCase()).replace(/[\W_]+/g,""),i=0;if(0!=a.length){for(var s=0;s<a.length;s++){i=(i<<5)-i+a.charCodeAt(s);i&=i}i<0&&(i*=-1),this.helper.save_cookie("_tthash",i,90,!1)}return i}get_Ttc(){var t;return this.helper.get_Param("ttclid")?(t=this.helper.get_Param("ttclid"),this.helper.save_cookie("_ttc",t,7,!1),t):this.helper.get_Cookie("_ttc",!1)?(t=this.helper.get_Cookie("_ttc",!1),this.helper.save_cookie("_ttc",t,7,!1),t):""}get_Ttp(){var t;if(this.helper.get_Cookie("_ttp",!1))return t=this.helper.get_Cookie("_ttp",!1),this.helper.save_cookie("_ttp",t,90,!1),t}}function wp_sdtrk_backload_tt_b(){if(void 0!==window.wp_sdtrk_engine_class){var t=window.wp_sdtrk_engine_class.get_catcher_tt();if(t.isOngoingBackload("b"))for(const e of window.wp_sdtrk_history)switch((data=e.split("_"))[0]){case"Page":t.catchPageHit(0);break;case"Time":t.catchTimeHit(data[1],0);break;case"Scroll":t.catchScrollHit(data[1],0);break;case"Click":t.catchClickHit(data[1],0);break;case"Visited":t.catchVisibilityHit(data[1],0)}}}function wp_sdtrk_backload_tt_s(){if(void 0!==window.wp_sdtrk_engine_class){var t=window.wp_sdtrk_engine_class.get_catcher_tt();if(t.isOngoingBackload("s"))for(const e of window.wp_sdtrk_history)switch((data=e.split("_"))[0]){case"Page":t.catchPageHit(1);break;case"Time":t.catchTimeHit(data[1],1);break;case"Scroll":t.catchScrollHit(data[1],1);break;case"Click":t.catchClickHit(data[1],1);break;case"Visited":t.catchVisibilityHit(data[1],1)}}}