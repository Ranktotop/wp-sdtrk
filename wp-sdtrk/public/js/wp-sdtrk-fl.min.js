class Wp_Sdtrk_Catcher_Fl{constructor(e,t){this.localizedData=wp_sdtrk_fl,this.event=e,this.helper=t,this.s_enabled=!1,this.b_enabled=!1,this.pixelLoaded=!1,this.validate()}validate(e=2){""!==this.localizedData.pid&&this.event&&(this.helper.isAdmin()?this.helper.debugLog(this.localizedData.dbg,{},"Skip because user is admin (fl)"):(2!==e&&0!==e||!1===this.helper.has_consent(this.localizedData.b_ci,this.localizedData.b_cs,this.event)||""===this.localizedData.b_e||(this.b_enabled=!0,this.loadPixel()),2!==e&&1!==e||!1===this.helper.has_consent(this.localizedData.s_ci,this.localizedData.s_cs,this.event)||""===this.localizedData.s_e||(this.s_enabled=!0)))}isOngoingBackload(e){var t=!0,a=!1;return"b"!==e||(t=this.pixelLoaded)||(this.validate(0),a=this.pixelLoaded),"s"!==e||(t=this.isEnabled("s"))||(this.validate(1),a=this.isEnabled("s")),!1===t&&!0===a}isEnabled(e){switch(e){case"b":return this.b_enabled;case"s":return this.s_enabled}return!1}catchPageHit(e=2){0!==e&&2!==e||this.fireData("Page",{state:!0}),this.catchEventHit(e)}catchEventHit(e=2){!this.event.grabEventName()||0!==e&&2!==e||this.fireData("Event",{state:!0})}catchScrollHit(e,t=2){0!==t&&2!==t||this.fireData("Scroll",{percent:e})}catchTimeHit(e,t=2){0!==t&&2!==t||this.fireData("Time",{time:e})}catchClickHit(e,t=2){0!==t&&2!==t||this.fireData("Click",{tag:e})}catchVisibilityHit(e,t=2){0!==t&&2!==t||this.fireData("Visibility",{tag:e})}loadPixel(){var e,_,t,a;this.isEnabled("b")&&!this.pixelLoaded&&(e=this.localizedData.pid,_=[],window.funnelytics={events:{trigger:function(e,t,a,i){_.push({name:e,attributes:t,callback:a,opts:i})}}},t=document.getElementsByTagName("script")[0],(a=document.createElement("script")).addEventListener("load",function(){window.funnelytics.init(e,!1,_)}),a.src="https://cdn.funnelytics.io/track-v3.js",a.type="text/javascript",a.async=!0,t.parentNode.insertBefore(a,t),this.pixelLoaded=!0)}fireData(e,t){if(this.isEnabled("b")&&this.pixelLoaded)switch(e){case"Page":window.funnelytics.events.trigger("page_view",this.get_data_custom([],{})),this.helper.debugLog(this.localizedData.dbg,{event:"page_view",data:this.get_data_custom([],{})},"Fired in Browser (fl-"+e+")");break;case"Event":window.funnelytics.events.trigger(this.convert_eventname(this.event.grabEventName()),this.get_data_custom()),this.helper.debugLog(this.localizedData.dbg,{event:this.convert_eventname(this.event.grabEventName()),data:this.get_data_custom()},"Fired in Browser (fl-"+e+")");break;case"Time":window.funnelytics.events.trigger(this.helper.get_EventName(e,t.time),this.get_data_custom(["__currency__","__total_in_cents__","__order__"],{})),this.helper.debugLog(this.localizedData.dbg,{event:this.helper.get_EventName(e,t.time),data:this.get_data_custom(["__currency__","__total_in_cents__","__order__"],{})},"Fired in Browser (fl-"+e+")");break;case"Scroll":window.funnelytics.events.trigger(this.helper.get_EventName(e,t.percent),this.get_data_custom(["__currency__","__total_in_cents__","__order__"],{})),this.helper.debugLog(this.localizedData.dbg,{event:this.helper.get_EventName(e,t.percent),data:this.get_data_custom(["__currency__","__total_in_cents__","__order__"],{})},"Fired in Browser (fl-"+e+")");break;case"Click":window.funnelytics.events.trigger(this.helper.get_EventName(e,t.tag),this.get_data_custom(["__currency__","__total_in_cents__","__order__"],{buttonTag:t.tag})),this.helper.debugLog(this.localizedData.dbg,{event:this.helper.get_EventName(e,t.tag),data:this.get_data_custom(["__currency__","__total_in_cents__","__order__"],{buttonTag:t.tag})},"Fired in Browser (fl-"+e+")");break;case"Visibility":window.funnelytics.events.trigger(this.helper.get_EventName(e,t.tag),this.get_data_custom(["__currency__","__total_in_cents__","__order__"],{itemTag:t.tag})),this.helper.debugLog(this.localizedData.dbg,{event:this.helper.get_EventName(e,t.tag),data:this.get_data_custom(["__currency__","__total_in_cents__","__order__"],{itemTag:t.tag})},"Fired in Browser (fl-"+e+")")}}get_data_custom(e=[],t={}){var a,i={};for(a in(0<this.event.grabValue()||"__commerce_action__"===this.convert_eventname(this.event.grabEventName()))&&(i.__currency__="EUR",i.__total_in_cents__=100*this.event.grabValue(),i.__order__=this.event.grabOrderId()),""!==this.event.grabProdId()?(i.__sku__=this.event.grabProdId(),i.__label__=this.event.grabProdName()):(i.__sku__=this.event.getPageId(),i.__label__=this.event.getPageName()),this.event.getUtm()){var _=this.event.getUtm()[a];""!==_&&(i[a]=_)}for(var s=0;s<e.length;s++){var n=e[s];i.hasOwnProperty(n)&&delete i[n]}for(const[r,_]of Object.entries(t))i[r]=_;return i}convert_eventname(e){return"purchase"!==e?e:"__commerce_action__"}}function wp_sdtrk_backload_fl_b(){if(void 0!==window.wp_sdtrk_engine_class){var e=window.wp_sdtrk_engine_class.get_catcher_fl();if(e.isOngoingBackload("b"))for(const t of window.wp_sdtrk_history)switch((data=t.split("_"))[0]){case"Page":e.catchPageHit(0);break;case"Time":e.catchTimeHit(data[1],0);break;case"Scroll":e.catchScrollHit(data[1],0);break;case"Click":e.catchClickHit(data[1],0);break;case"Visited":e.catchVisibilityHit(data[1],0)}}}