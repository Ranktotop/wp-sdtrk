class Wp_Sdtrk_Catcher_Fl{constructor(t,e){this.localizedData=wp_sdtrk_fl,this.event=t,this.helper=e,this.s_enabled=!1,this.b_enabled=!1,this.pixelLoaded=!1,this.validate()}validate(t=2){""!==this.localizedData.pid&&this.event&&(2!==t&&0!==t||!1===this.helper.has_consent(this.localizedData.b_ci,this.localizedData.b_cs,this.event)||""===this.localizedData.b_e||(this.b_enabled=!0,this.loadPixel()),2!==t&&1!==t||!1===this.helper.has_consent(this.localizedData.s_ci,this.localizedData.s_cs,this.event)||""===this.localizedData.s_e||(this.s_enabled=!0))}isOngoingBackload(t){var e=!0,a=!1;return"b"!==t||(e=this.pixelLoaded)||(this.validate(0),a=this.pixelLoaded),"s"!==t||(e=this.isEnabled("s"))||(this.validate(1),a=this.isEnabled("s")),!1===e&&!0===a}isEnabled(t){switch(t){case"b":return this.b_enabled;case"s":return this.s_enabled}return!1}catchPageHit(t=2){0!==t&&2!==t||this.fireData("Page",{state:!0}),this.catchEventHit(t)}catchEventHit(t=2){!this.event.grabEventName()||0!==t&&2!==t||this.fireData("Event",{state:!0})}catchScrollHit(t,e=2){0!==e&&2!==e||this.fireData("Scroll",{percent:t})}catchTimeHit(t,e=2){0!==e&&2!==e||this.fireData("Time",{time:t})}catchClickHit(t,e=2){0!==e&&2!==e||this.fireData("Click",{tag:t})}catchVisibilityHit(t,e=2){0!==e&&2!==e||this.fireData("Visibility",{tag:t})}loadPixel(){var t,_,e,a;this.isEnabled("b")&&!this.pixelLoaded&&(t=this.localizedData.pid,_=[],window.funnelytics={events:{trigger:function(t,e,a,i){_.push({name:t,attributes:e,callback:a,opts:i})}}},e=document.getElementsByTagName("script")[0],(a=document.createElement("script")).addEventListener("load",function(){window.funnelytics.init(t,!1,_)}),a.src="https://cdn.funnelytics.io/track-v3.js",a.type="text/javascript",a.async=!0,e.parentNode.insertBefore(a,e),this.pixelLoaded=!0)}fireData(t,e){if(this.isEnabled("b")&&this.pixelLoaded)switch(t){case"Page":window.funnelytics.events.trigger("page_view",this.get_data_custom([],{})),this.helper.debugLog(this.localizedData.dbg,{event:"page_view",data:this.get_data_custom([],{})},"Fired in Browser (fl-"+t+")");break;case"Event":window.funnelytics.events.trigger(this.convert_eventname(this.event.grabEventName()),this.get_data_custom()),this.helper.debugLog(this.localizedData.dbg,{event:this.convert_eventname(this.event.grabEventName()),data:this.get_data_custom()},"Fired in Browser (fl-"+t+")");break;case"Time":window.funnelytics.events.trigger(this.helper.get_EventName(t,e.time),this.get_data_custom(["__currency__","__total_in_cents__","__order__"],{})),this.helper.debugLog(this.localizedData.dbg,{event:this.helper.get_EventName(t,e.time),data:this.get_data_custom(["__currency__","__total_in_cents__","__order__"],{})},"Fired in Browser (fl-"+t+")");break;case"Scroll":window.funnelytics.events.trigger(this.helper.get_EventName(t,e.percent),this.get_data_custom(["__currency__","__total_in_cents__","__order__"],{})),this.helper.debugLog(this.localizedData.dbg,{event:this.helper.get_EventName(t,e.percent),data:this.get_data_custom(["__currency__","__total_in_cents__","__order__"],{})},"Fired in Browser (fl-"+t+")");break;case"Click":window.funnelytics.events.trigger(this.helper.get_EventName(t,e.tag),this.get_data_custom(["__currency__","__total_in_cents__","__order__"],{buttonTag:e.tag})),this.helper.debugLog(this.localizedData.dbg,{event:this.helper.get_EventName(t,e.tag),data:this.get_data_custom(["__currency__","__total_in_cents__","__order__"],{buttonTag:e.tag})},"Fired in Browser (fl-"+t+")");break;case"Visibility":window.funnelytics.events.trigger(this.helper.get_EventName(t,e.tag),this.get_data_custom(["__currency__","__total_in_cents__","__order__"],{itemTag:e.tag})),this.helper.debugLog(this.localizedData.dbg,{event:this.helper.get_EventName(t,e.tag),data:this.get_data_custom(["__currency__","__total_in_cents__","__order__"],{itemTag:e.tag})},"Fired in Browser (fl-"+t+")")}}get_data_custom(t=[],e={}){var a,i={};for(a in(0<this.event.grabValue()||"__commerce_action__"===this.convert_eventname(this.event.grabEventName()))&&(i.__currency__="EUR",i.__total_in_cents__=100*this.event.grabValue(),i.__order__=this.event.grabOrderId()),""!==this.event.grabProdId()?(i.__sku__=this.event.grabProdId(),i.__label__=this.event.grabProdName()):(i.__sku__=this.event.getPageId(),i.__label__=this.event.getPageName()),this.event.getUtm()){var _=this.event.getUtm()[a];""!==_&&(i[a]=_)}for(var s=0;s<t.length;s++){var n=t[s];i.hasOwnProperty(n)&&delete i[n]}for(const[r,_]of Object.entries(e))i[r]=_;return i}convert_eventname(t){return"purchase"!==t?t:"__commerce_action__"}}function wp_sdtrk_backload_fl_b(){if(void 0!==window.wp_sdtrk_engine_class){var t=window.wp_sdtrk_engine_class.get_catcher_fl();if(t.isOngoingBackload("b"))for(const e of window.wp_sdtrk_history)switch((data=e.split("_"))[0]){case"Page":t.catchPageHit(0);break;case"Time":t.catchTimeHit(data[1],0);break;case"Scroll":t.catchScrollHit(data[1],0);break;case"Click":t.catchClickHit(data[1],0);break;case"Visited":t.catchVisibilityHit(data[1],0)}}}