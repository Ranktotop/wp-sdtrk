var fbEventData=!1,fbEventData_finishedLoading=!1,fbCustomEvent=!1,fbScrollTracked_b=!1,fbScrollTracked_s=!1,fbClickedButtons_b=[],fbClickedButtons_s=[];function wp_sdtrk_runFB(){jQuery(document).ready(function(){wp_sdtrk_collectFBData(),wp_sdtrk_track_fb(),fbEventData_finishedLoading=!0})}function wp_sdtrk_collectFBData(){if(""!==wp_sdtrk_fb.fb_id&&wp_sdtrk_event){var t,e=wp_sdtrk_event.grabProdName(),r=wp_sdtrk_event.grabProdId(),a=wp_sdtrk_event.grabOrderId(),_=wp_sdtrk_convertEventNameToFb(wp_sdtrk_event.grabEventName()),n=wp_sdtrk_event.grabValue(),c=wp_sdtrk_event.getTimeTrigger(),s=wp_sdtrk_event.getScrollTrigger(),b=wp_sdtrk_event.getClickTrigger(),f=wp_sdtrk_event.getUserFirstName(),d=wp_sdtrk_event.getUserLastName(),i=wp_sdtrk_event.getUserEmail(),a={pixelId:wp_sdtrk_fb.fb_id,eventId:a,eventName:_},k={};for(t in(0<n||"Purchase"===_)&&(k.currency="EUR",k.value=n),""!==r&&(k.content_ids='["'+r+'"]',k.content_type="product",k.content_name=e,k.contents='[{"id":"'+r+'","quantity":1}]'),wp_sdtrk_event.getUtm())""!==wp_sdtrk_event.getUtm()[t]&&(k[t]=wp_sdtrk_event.getUtm()[t]);_={};""!==f&&(_.fn=f),""!==d&&(_.ln=d),""!==i&&(_.em=i),(fbEventData={}).baseData=a,fbEventData.customData=k,fbEventData.fbc=wp_sdtrk_getFbc(),fbEventData.fbp=wp_sdtrk_getFbp(),fbEventData.timeTrigger=c,fbEventData.scrollTrigger=s,fbEventData.clickTrigger=b,fbEventData.userData=_}}function wp_sdtrk_track_fb(){!1!==fbEventData&&(fbEventData.bc=wp_sdtrk_checkServiceConsent(wp_sdtrk_fb.c_fb_b_i,wp_sdtrk_fb.c_fb_b_s),fbEventData.sc=wp_sdtrk_checkServiceConsent(wp_sdtrk_fb.c_fb_s_i,wp_sdtrk_fb.c_fb_s_s),!1!==fbEventData.bc&&""!==wp_sdtrk_fb.fb_b_e&&wp_sdtrk_track_fb_b(),!1!==fbEventData.sc&&""!==wp_sdtrk_fb.fb_s_e&&wp_sdtrk_track_fb_s())}function wp_sdtrk_track_fb_s(){var t={fbp:fbEventData.fbp,fbc:fbEventData.fbc,event:wp_sdtrk_event,type:"fb"};wp_sdtrk_sendAjax(t),0<fbEventData.timeTrigger.length&&wp_sdtrk_track_fb_s_timeTracker(),!1!==fbEventData.scrollTrigger&&wp_sdtrk_track_fb_s_scrollTracker(),!1!==fbEventData.clickTrigger&&wp_sdtrk_track_fb_s_clickTracker()}function wp_sdtrk_track_fb_s_timeTracker(){var a,_;fbEventData.timeTrigger.length<1||!(a={fbp:fbEventData.fbp,fbc:fbEventData.fbc,event:wp_sdtrk_event,type:"fb-tt"})!==(_=fbEventData.baseData.eventId||!1)&&fbEventData.timeTrigger.forEach(r=>{var t=parseInt(r);isNaN(t)||(t*=1e3,jQuery(document).ready(function(){setTimeout(function(){var t=_+"-t"+r,e="Watchtime-"+r.toString()+"-Seconds";a.timeEventId=t,a.timeEventName=e,wp_sdtrk_sendAjax(a)},t)}))})}function wp_sdtrk_track_fb_s_scrollTracker(){var r,a;!1!==fbEventData.scrollTrigger&&!0!==fbScrollTracked_s&&!(r={fbp:fbEventData.fbp,fbc:fbEventData.fbc,event:wp_sdtrk_event,type:"fb-sd"})!==(a=fbEventData.baseData.eventId||!1)&&window.addEventListener("scroll",function(){var t,e;!0!==fbScrollTracked_s&&(t=jQuery(this).scrollTop(),e=jQuery(document).height()-jQuery(window).height(),fbEventData.scrollTrigger<=Math.ceil(100*t/e)&&(fbScrollTracked_s=!0,t=a+"-s"+fbEventData.scrollTrigger,e="Scrolldepth-"+fbEventData.scrollTrigger+"-Percent",r.scrollEventId=t,r.scrollEventName=e,wp_sdtrk_sendAjax(r)))})}function wp_sdtrk_track_fb_s_clickTracker(){var r,a;!1===fbEventData.clickTrigger||wp_sdtrk_buttons.length<1||!(r={fbp:fbEventData.fbp,fbc:fbEventData.fbc,event:wp_sdtrk_event,type:"fb-bc"})!==(a=fbEventData.baseData.eventId||!1)&&wp_sdtrk_buttons.forEach(e=>{jQuery(e[0]).on("click",function(){var t;fbClickedButtons_s.includes(e[1])||(fbClickedButtons_s.push(e[1]),t=a+"-b"+e[1],r.clickEventId=t,r.clickEventName="ButtonClick",r.clickEventTag=e[1],wp_sdtrk_sendAjax(r))})})}function wp_sdtrk_track_fb_b(){var t,e,r,a,_=fbEventData.baseData,n=fbEventData.customData,c=wp_sdtrk_clone(n),s=_.pixelId||!1,b=_.eventId||!1,_=_.eventName||!1;c.hasOwnProperty("value")&&(delete c.value,delete c.currency),!1!==s&&!1!==b&&(r=window,a=document,t="script",r.fbq||(e=r.fbq=function(){e.callMethod?e.callMethod.apply(e,arguments):e.queue.push(arguments)},r._fbq||(r._fbq=e),(e.push=e).loaded=!0,e.version="2.0",e.queue=[],(r=a.createElement(t)).async=!0,r.src="https://connect.facebook.net/en_US/fbevents.js",(a=a.getElementsByTagName(t)[0]).parentNode.insertBefore(r,a)),fbq("init",s,fbEventData.userData),fbq("track","PageView",c,{eventID:b}),!1!==_&&"PageView"!==_&&(fbCustomEvent?fbq("trackCustom",_,n,{eventID:b}):fbq("trackSingle",s,_,n,{eventID:b})),0<fbEventData.timeTrigger.length&&wp_sdtrk_track_fb_b_timeTracker(s,b,c),!1!==fbEventData.scrollTrigger&&wp_sdtrk_track_fb_b_scrollTracker(s,b,c),!1!==fbEventData.clickTrigger&&wp_sdtrk_track_fb_b_clickTracker(s,b,c))}function wp_sdtrk_track_fb_b_timeTracker(t,a,_){!1===t||!1===a||fbEventData.timeTrigger.length<1||!fbq||fbEventData.timeTrigger.forEach(r=>{var t=parseInt(r);isNaN(t)||(t*=1e3,jQuery(document).ready(function(){setTimeout(function(){var t=a+"-t"+r,e="Watchtime-"+r.toString()+"-Seconds";fbq("trackCustom",e,_,{eventID:t})},t)}))})}function wp_sdtrk_track_fb_b_scrollTracker(t,r,a){!1!==t&&!1!==r&&!1!==fbEventData.scrollTrigger&&fbq&&!0!==fbScrollTracked_b&&window.addEventListener("scroll",function(){var t,e;!0!==fbScrollTracked_b&&(t=jQuery(this).scrollTop(),e=jQuery(document).height()-jQuery(window).height(),fbEventData.scrollTrigger<=Math.ceil(100*t/e)&&(fbScrollTracked_b=!0,t=r+"-s"+fbEventData.scrollTrigger,e="Scrolldepth-"+fbEventData.scrollTrigger+"-Percent",fbq("trackCustom",e,a,{eventID:t})))})}function wp_sdtrk_track_fb_b_clickTracker(t,a,_){!1===t||!1===a||!1===fbEventData.clickTrigger||!fbq||wp_sdtrk_buttons.length<1||wp_sdtrk_buttons.forEach(r=>{jQuery(r[0]).on("click",function(){var t,e;fbClickedButtons_b.includes(r[1])||(fbClickedButtons_b.push(r[1]),t=wp_sdtrk_clone(_),e=a+"-b"+r[1],t.buttonTag=r[1],fbq("trackCustom","ButtonClick",t,{eventID:e}))})})}function wp_sdtrk_backload_fb_s(){!1!==fbEventData&&!1===fbEventData.sc&&""!==wp_sdtrk_fb.fb_s_e&&fbEventData_finishedLoading&&(fbEventData.sc=!0,wp_sdtrk_track_fb_s())}function wp_sdtrk_backload_fb_b(){!1!==fbEventData&&!1===fbEventData.bc&&""!==wp_sdtrk_fb.fb_b_e&&fbEventData_finishedLoading&&(fbEventData.bc=!0,wp_sdtrk_track_fb_b())}function wp_sdtrk_convertEventNameToFb(t){switch(t=t&&""!==t?t.toLowerCase():t){case"page_view":return"PageView";case"add_to_cart":return"AddToCart";case"purchase":return"Purchase";case"sign_up":return"CompleteRegistration";case"generate_lead":return"Lead";case"begin_checkout":return"InitiateCheckout";case"view_item":return"ViewContent";default:return fbCustomEvent=!0,t}}function wp_sdtrk_getFbp(){if(wp_sdtrk_getCookie("_fbp",!1))return t=wp_sdtrk_getCookie("_fbp",!1),wp_sdtrk_setCookie("_fbp",t,90,!1),t;var t="fb.1."+ +new Date+"."+parseInt(1e10*Math.random());return wp_sdtrk_setCookie("_fbp",t,90,!1),t}function wp_sdtrk_getFbc(){var t;return wp_sdtrk_getParam("fbclid")?(t="fb.1."+ +new Date+"."+wp_sdtrk_getParam("fbclid"),wp_sdtrk_setCookie("_fbc",t,90,!1),t):wp_sdtrk_getCookie("_fbc",!1)?(t=wp_sdtrk_getCookie("_fbc",!1),wp_sdtrk_setCookie("_fbc",t,90,!1),t):""}