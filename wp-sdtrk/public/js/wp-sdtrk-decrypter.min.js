class Wp_Sdtrk_Decrypter{constructor(){this.init=!1,this.services=wp_sdtrk_decrypter_config.services,this.decryptedData=!1,this.encryptedData=!1}initialize(){this.encryptedData=this.paramsToObject(),this.decrypt()}isInitialized(){return this.init}isEncrypted(){if(0<this.services.length)return!0}getEncryptedData(){return this.encryptedData}getDecryptedData(){return this.decryptedData}decrypt(){var t;!1===this.decryptedData&&(this.isEncrypted()?((t={action:"wp_sdtrk_handleAjaxCallback",func:"decryptData"}).data=this.encryptedData,t.meta=this.services,t._nonce=wp_sdtrk._nonce,this.decryptOnServer(t,this).then(function(t){wp_sdtrk_startTracker()}).catch(function(t){console.log(t)})):(this.decryptedData=this.encryptedData,this.init=!0,wp_sdtrk_startTracker()))}decryptOnServer(t,r){return new Promise(function(e,a){jQuery.ajax({cache:!1,type:"POST",url:wp_sdtrk.ajax_url,data:t,success:function(t){r.decryptedData=JSON.parse(t).data,r.init=!0,e(t)},error:function(t,e,r){a(err)}})})}paramsToObject(){var t,e;const r={};for([t,e]of new URLSearchParams(window.location.search))r[t]=e;return r}}